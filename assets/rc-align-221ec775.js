import{c as p,_ as D}from"./@babel-9169ff57.js";import{a as I,b as k}from"./dom-align-529d0cdc.js";import{A as G,b as J,m as K,B as Q,h as U,f as Z}from"./rc-util-1f458f21.js";import{R as t}from"./react-5cc2acaa.js";import{i as _}from"./resize-observer-polyfill-0f9f8adb.js";const x=function(n,e){var i=t.useRef(!1),o=t.useRef(null);function f(){window.clearTimeout(o.current)}function u(l){if(f(),!i.current||l===!0){if(n(l)===!1)return;i.current=!0,o.current=window.setTimeout(function(){i.current=!1},e)}else o.current=window.setTimeout(function(){i.current=!1,u()},e)}return[u,function(){i.current=!1,f()}]};function ee(n,e){return n===e?!0:!n||!e?!1:"pageX"in e&&"pageY"in e?n.pageX===e.pageX&&n.pageY===e.pageY:"clientX"in e&&"clientY"in e?n.clientX===e.clientX&&n.clientY===e.clientY:!1}function ne(n,e){n!==document.activeElement&&G(e,n)&&typeof n.focus=="function"&&n.focus()}function Y(n,e){var i=null,o=null;function f(l){var w=p(l,1),d=w[0].target;if(document.documentElement.contains(d)){var m=d.getBoundingClientRect(),E=m.width,c=m.height,s=Math.floor(E),a=Math.floor(c);(i!==s||o!==a)&&Promise.resolve().then(function(){e({width:s,height:a})}),i=s,o=a}}var u=new _(f);return n&&u.observe(n),function(){u.disconnect()}}function W(n){return typeof n!="function"?null:n()}function F(n){return D(n)!=="object"||!n?null:n}var te=function(e,i){var o=e.children,f=e.disabled,u=e.target,l=e.align,w=e.onAlign,d=e.monitorWindowResize,m=e.monitorBufferTime,E=m===void 0?0:m,c=t.useRef({}),s=t.useRef(),a=t.Children.only(o),v=t.useRef({});v.current.disabled=f,v.current.target=u,v.current.align=l,v.current.onAlign=w;var C=x(function(){var r=v.current,V=r.disabled,B=r.target,T=r.align,X=r.onAlign,R=s.current;if(!V&&B&&R){var h,A=W(B),y=F(B);c.current.element=A,c.current.point=y,c.current.align=T;var j=document,q=j.activeElement;return A&&Z(A)?h=I(R,A,T):y&&(h=k(R,y,T)),ne(q,R),X&&h&&X(R,h),!0}return!1},E),P=p(C,2),g=P[0],S=P[1],H=t.useState(),$=p(H,2),b=$[0],L=$[1],M=t.useState(),z=p(M,2),N=z[0],O=z[1];return J(function(){L(W(u)),O(F(u))}),t.useEffect(function(){(c.current.element!==b||!ee(c.current.point,N)||!K(c.current.align,l))&&g()}),t.useEffect(function(){var r=Y(s.current,g);return r},[s.current]),t.useEffect(function(){var r=Y(b,g);return r},[b]),t.useEffect(function(){f?S():g()},[f]),t.useEffect(function(){if(d){var r=Q(window,"resize",g);return r.remove}},[d]),t.useEffect(function(){return function(){S()}},[]),t.useImperativeHandle(i,function(){return{forceAlign:function(){return g(!0)}}}),t.isValidElement(a)&&(a=t.cloneElement(a,{ref:U(a.ref,s)})),a},re=t.forwardRef(te);re.displayName="Align";export{re as R};
